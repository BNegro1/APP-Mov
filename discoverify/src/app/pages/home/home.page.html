<ion-app>
  <ion-split-pane contentId="main-content">
    <!-- Menú lateral -->
    <ion-menu contentId="main-content" type="overlay">
      <ion-header>
      </ion-header>
      <ion-content>
        <ion-list>
          <ion-list-header>Discoverify</ion-list-header>
          <ion-menu-toggle auto-hide="false">
            <ion-item (click)="scrollToTop()">
              <ion-icon slot="start" name="home-outline"></ion-icon>
              <ion-label>Inicio</ion-label>
            </ion-item>
            <ion-item routerLink="/contribute" routerDirection="root">
              <ion-icon slot="start" name="cloud-upload-outline"></ion-icon>
              <ion-label>Realizar aporte</ion-label>
            </ion-item>
            <ion-item *ngIf="isAuthenticated" (click)="logout()">
              <ion-icon slot="start" name="log-out-outline"></ion-icon>
              <ion-label>Cerrar sesión</ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
        <!-- Nombre de usuario en el borde inferior del menú -->
        <ion-item *ngIf="isAuthenticated" class="username-item" lines="none">
          <ion-label>
            Cuenta: {{ nombreUsuario }} <br>
            <small>Álbumes que te gustan: {{ likesCount }}</small>
          </ion-label>
        </ion-item>
      </ion-content>
    </ion-menu>

    <!-- Contenido principal (álbumes) -->
    <div class="ion-page" id="main-content">
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
          </ion-buttons>
          <ion-title>Discoverify</ion-title>
        </ion-toolbar>
      </ion-header>

      <ion-content #content> <!-- NO borrar content.-->
        <ion-grid>
          <ion-row>
            <ion-col size="12" size-sm="6" size-md="3" *ngFor="let album of albums">
              <ion-card>
                <img [src]="album.cover" [alt]="album.title + ' - ' + album.artist" class="album-cover" />
                <ion-card-header>
                  <ion-card-title>{{ album.artist }} - {{ album.title }}</ion-card-title>
                  <div class="like-dislike-buttons">
                    <ion-icon name="thumbs-up-outline" [color]="album.liked ? 'success' : 'medium'"
                      (click)="likeAlbum(album.id)">
                    </ion-icon>
                    <ion-icon name="thumbs-down-outline" [color]="album.disliked ? 'danger' : 'medium'"
                      (click)="dislikeAlbum(album.id)">
                    </ion-icon>
                  </div>
                </ion-card-header>
                <ion-card-content>
                  <p>Fecha de lanzamiento: {{ album.releaseDate }}</p>
                </ion-card-content>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>

        <!-- Infinite scroll  -->
        <ion-infinite-scroll (ionInfinite)="loadMore($event)">
          <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Cargando más álbumes...">
          </ion-infinite-scroll-content>
        </ion-infinite-scroll>
      </ion-content>
    </div>
  </ion-split-pane>
</ion-app>