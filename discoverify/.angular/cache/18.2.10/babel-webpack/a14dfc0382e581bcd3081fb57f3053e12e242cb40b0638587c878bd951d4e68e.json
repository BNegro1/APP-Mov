{"ast":null,"code":"import _asyncToGenerator from \"D:/Repositorios Oficial/Aplicacion-Movil/APP-Mov/discoverify/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _HomePage;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/dbservice.service\";\nimport * as i2 from \"../../services/spotify-album.service\";\nimport * as i3 from \"src/app/services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ionic/angular\";\nfunction HomePage_ion_item_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 16);\n    i0.ɵɵelement(1, \"ion-icon\", 17);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3, \"Iniciar sesi\\u00F3n\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomePage_ion_item_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 18);\n    i0.ɵɵelement(1, \"ion-icon\", 19);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3, \"Registrarse\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomePage_ion_item_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 20);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_item_19_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 21);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3, \"Cerrar sesi\\u00F3n\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomePage_ion_item_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 22)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"small\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Cuenta: \", ctx_r1.nombreUsuario, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\u00C1lbumes que te gustan: \", ctx_r1.likesCount, \"\");\n  }\n}\nfunction HomePage_ion_col_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\", 23)(1, \"ion-card\");\n    i0.ɵɵelement(2, \"img\", 24);\n    i0.ɵɵelementStart(3, \"ion-card-header\")(4, \"ion-card-title\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 25)(7, \"ion-icon\", 26);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_col_31_Template_ion_icon_click_7_listener() {\n      const album_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.likeAlbum(album_r4.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-icon\", 27);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_col_31_Template_ion_icon_click_8_listener() {\n      const album_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.dislikeAlbum(album_r4.id));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"ion-card-content\")(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const album_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", album_r4.cover, i0.ɵɵsanitizeUrl)(\"alt\", album_r4.title + \" - \" + album_r4.artist);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", album_r4.artist, \" - \", album_r4.title, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"color\", album_r4.liked ? \"success\" : \"medium\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"color\", album_r4.disliked ? \"danger\" : \"medium\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Fecha de lanzamiento: \", album_r4.releaseDate, \"\");\n  }\n}\nexport class HomePage {\n  constructor(dbService,\n  // Inyectar DbService para manejar localStorage.\n  spotifyAlbumService, authService,\n  // Inyectar AuthService\n  router // Inyectar Router\n  ) {\n    this.dbService = dbService;\n    this.spotifyAlbumService = spotifyAlbumService;\n    this.authService = authService;\n    this.router = router;\n    this.albums = [];\n    this.loading = false;\n    this.error = '';\n    this.limit = 10;\n    this.offset = 0;\n    this.isAuthenticated = false;\n    this.nombreUsuario = ''; // Definir nombreUsuario como string o null para evitar errores, se usa \"/\" para indicar que puede ser null o string.\n    this.likesCount = 0; // Variable para contar los likes (Definida con 0.)\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.isAuthenticated = _this.authService.isAuthenticated();\n      _this.nombreUsuario = yield _this.authService.getNombreUsuario(); // Esperar el nombre de usuario\n      if (_this.isAuthenticated) {\n        _this.loadAlbums();\n      } else {\n        _this.router.navigate(['/login']); // Redirigir a la página de login si no está autenticado\n      }\n      // Hacer subscribe al contador de likes\n      _this.dbService.getLikesCount().subscribe(count => {\n        _this.likesCount = count; // Actualizar el contador de likes en el navbar\n      });\n    })();\n  }\n  loadAlbums() {\n    this.loading = true;\n    this.spotifyAlbumService.searchAlbums('New Order, Oasis, The Cure, Bauhaus, Depeche Mode', this.limit, this.offset).subscribe(albums => {\n      this.albums = albums;\n      this.loading = false;\n      this.checkAlbumLikes(); // Verificar si los álbumes ya tienen \"like\" o \"dislike\"\n    }, error => {\n      console.error('Error de fetching, error desc.:', error);\n      this.error = 'No se puede cargar albumes, zzz...';\n      this.loading = false;\n    });\n  }\n  checkAlbumLikes() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const userId = yield _this2.authService.getNombreUsuario(); // Esperar el userId\n      if (userId) {\n        // Verificar que userId no sea null\n        const likedAlbums = yield _this2.dbService.getLikedAlbums(userId); // Esperar a que se resuelva la promesa\n        _this2.albums.forEach(album => {\n          album.liked = likedAlbums.includes(album.id); // Verificar si el álbum tiene \"like\"\n        });\n      }\n    })();\n  }\n  loadMore(event) {\n    this.offset += this.limit;\n    this.spotifyAlbumService.searchAlbums('Joy Division, New Order, The Police', this.limit, this.offset).subscribe(albums => {\n      this.albums = [...this.albums, ...albums];\n      event.target.complete();\n      if (albums.length === 0) {\n        event.target.disabled = true;\n      }\n    }, error => {\n      console.error('ERROR AL FETCHING DE ALBUMES XD:', error);\n      event.target.complete();\n    });\n  }\n  likeAlbum(albumId) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const userId = yield _this3.authService.getNombreUsuario(); // Esperar el userId\n      if (userId) {\n        // Verificar que userId no sea null\n        const album = _this3.albums.find(a => a.id === albumId);\n        if (album) {\n          album.liked = true;\n          album.disliked = false;\n          yield _this3.dbService.likeAlbum(userId, albumId); // Guardar en SQLite\n          _this3.updateRecommendations(album);\n        }\n      }\n    })();\n  }\n  dislikeAlbum(albumId) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const userId = yield _this4.authService.getNombreUsuario(); // Esperar el userId\n      if (userId) {\n        // Verificar que userId no sea null\n        const album = _this4.albums.find(a => a.id === albumId);\n        if (album) {\n          album.liked = false;\n          album.disliked = true;\n          yield _this4.dbService.dislikeAlbum(userId, albumId); // Guardar en SQLite\n          _this4.updateRecommendations(album);\n        }\n      }\n    })();\n  }\n  logout() {\n    this.authService.logout();\n    this.router.navigate(['/login']);\n  }\n  // Simular la actualización de recomendaciones\n  updateRecommendations(album) {\n    if (album.liked) {\n      console.log(`Recomendaciones actualizadas basadas en que te gusta el álbum: ${album.title}`);\n    } else if (album.disliked) {\n      console.log(`No se mostrarán álbumes similares a: ${album.title}`);\n    }\n  }\n}\n_HomePage = HomePage;\n_HomePage.ɵfac = function HomePage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _HomePage)(i0.ɵɵdirectiveInject(i1.DbService), i0.ɵɵdirectiveInject(i2.SpotifyAlbumService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n};\n_HomePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _HomePage,\n  selectors: [[\"app-home\"]],\n  decls: 34,\n  vars: 5,\n  consts: [[\"contentId\", \"main-content\"], [\"contentId\", \"main-content\", \"type\", \"overlay\"], [\"auto-hide\", \"false\"], [\"routerLink\", \"/home\", \"routerDirection\", \"root\"], [\"slot\", \"start\", \"name\", \"home-outline\"], [\"routerLink\", \"/contribute\", \"routerDirection\", \"root\"], [\"slot\", \"start\", \"name\", \"cloud-upload-outline\"], [\"routerLink\", \"/login\", \"routerDirection\", \"root\", 4, \"ngIf\"], [\"routerLink\", \"/register\", \"routerDirection\", \"root\", 4, \"ngIf\"], [3, \"click\", 4, \"ngIf\"], [\"class\", \"username-item\", \"lines\", \"none\", 4, \"ngIf\"], [\"id\", \"main-content\", 1, \"ion-page\"], [\"slot\", \"start\"], [\"size\", \"12\", \"size-sm\", \"6\", \"size-md\", \"3\", 4, \"ngFor\", \"ngForOf\"], [3, \"ionInfinite\"], [\"loadingSpinner\", \"bubbles\", \"loadingText\", \"Cargando m\\u00E1s \\u00E1lbumes...\"], [\"routerLink\", \"/login\", \"routerDirection\", \"root\"], [\"slot\", \"start\", \"name\", \"log-in-outline\"], [\"routerLink\", \"/register\", \"routerDirection\", \"root\"], [\"slot\", \"start\", \"name\", \"person-add-outline\"], [3, \"click\"], [\"slot\", \"start\", \"name\", \"log-out-outline\"], [\"lines\", \"none\", 1, \"username-item\"], [\"size\", \"12\", \"size-sm\", \"6\", \"size-md\", \"3\"], [1, \"album-cover\", 3, \"src\", \"alt\"], [1, \"like-dislike-buttons\"], [\"name\", \"thumbs-up-outline\", 3, \"click\", \"color\"], [\"name\", \"thumbs-down-outline\", 3, \"click\", \"color\"]],\n  template: function HomePage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-app\")(1, \"ion-split-pane\", 0)(2, \"ion-menu\", 1);\n      i0.ɵɵelement(3, \"ion-header\");\n      i0.ɵɵelementStart(4, \"ion-content\")(5, \"ion-list\")(6, \"ion-list-header\");\n      i0.ɵɵtext(7, \"Discoverify\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"ion-menu-toggle\", 2)(9, \"ion-item\", 3);\n      i0.ɵɵelement(10, \"ion-icon\", 4);\n      i0.ɵɵelementStart(11, \"ion-label\");\n      i0.ɵɵtext(12, \"Inicio\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"ion-item\", 5);\n      i0.ɵɵelement(14, \"ion-icon\", 6);\n      i0.ɵɵelementStart(15, \"ion-label\");\n      i0.ɵɵtext(16, \"Realizar aporte\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(17, HomePage_ion_item_17_Template, 4, 0, \"ion-item\", 7)(18, HomePage_ion_item_18_Template, 4, 0, \"ion-item\", 8)(19, HomePage_ion_item_19_Template, 4, 0, \"ion-item\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(20, HomePage_ion_item_20_Template, 6, 2, \"ion-item\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 11)(22, \"ion-header\")(23, \"ion-toolbar\")(24, \"ion-buttons\", 12);\n      i0.ɵɵelement(25, \"ion-menu-button\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"ion-title\");\n      i0.ɵɵtext(27, \"Discoverify\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(28, \"ion-content\")(29, \"ion-grid\")(30, \"ion-row\");\n      i0.ɵɵtemplate(31, HomePage_ion_col_31_Template, 12, 7, \"ion-col\", 13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"ion-infinite-scroll\", 14);\n      i0.ɵɵlistener(\"ionInfinite\", function HomePage_Template_ion_infinite_scroll_ionInfinite_32_listener($event) {\n        return ctx.loadMore($event);\n      });\n      i0.ɵɵelement(33, \"ion-infinite-scroll-content\", 15);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.albums);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.IonApp, i6.IonButtons, i6.IonCard, i6.IonCardContent, i6.IonCardHeader, i6.IonCardTitle, i6.IonCol, i6.IonContent, i6.IonGrid, i6.IonHeader, i6.IonIcon, i6.IonInfiniteScroll, i6.IonInfiniteScrollContent, i6.IonItem, i6.IonLabel, i6.IonList, i6.IonListHeader, i6.IonMenu, i6.IonMenuButton, i6.IonMenuToggle, i6.IonRow, i6.IonSplitPane, i6.IonTitle, i6.IonToolbar, i6.RouterLinkDelegate, i4.RouterLink],\n  styles: [\"ion-content[_ngcontent-%COMP%] {\\n  --background: var(--ion-background-color);\\n}\\n\\nion-card[_ngcontent-%COMP%] {\\n  margin: 10px 0;\\n  background-color: #1f1f1f;\\n  border-radius: 0;\\n  box-shadow: none;\\n  overflow: hidden;\\n}\\n\\n.album-cover[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: auto;\\n  display: block;\\n}\\n\\nion-card-header[_ngcontent-%COMP%] {\\n  padding: 10px;\\n}\\n\\nion-card-title[_ngcontent-%COMP%] {\\n  font-size: 1rem;\\n  font-weight: 600;\\n  color: var(--ion-text-color);\\n}\\n\\nion-card-content[_ngcontent-%COMP%] {\\n  padding: 0 10px 10px;\\n}\\nion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  color: #b0b0b0;\\n  margin: 5px 0;\\n  font-size: 0.8rem;\\n}\\n\\nion-menu[_ngcontent-%COMP%] {\\n  --background: #1f1f1f;\\n  --width: 250px;\\n}\\nion-menu[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%] {\\n  --background: var(--ion-toolbar-background);\\n  --color: var(--ion-toolbar-color);\\n}\\nion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%] {\\n  --padding-top: 0;\\n  --padding-bottom: 0;\\n}\\nion-menu[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%] {\\n  background-color: transparent;\\n  padding: 0;\\n}\\nion-menu[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: 700;\\n  padding: 20px 15px;\\n  color: var(--ion-text-color);\\n  background-color: var(--ion-color-primary);\\n}\\nion-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] {\\n  --background: transparent;\\n  --color: var(--ion-text-color);\\n  --padding-start: 15px;\\n  --padding-end: 15px;\\n  --min-height: 45px;\\n}\\nion-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover {\\n  --background: rgba(255, 255, 255, 0.05);\\n}\\nion-menu[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  color: var(--ion-color-secondary);\\n  margin-right: 15px;\\n}\\n\\n.username-item[_ngcontent-%COMP%] {\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  --background: #1a1a1a;\\n  --color: var(--ion-text-color);\\n  --padding-top: 10px;\\n  --padding-bottom: 10px;\\n  font-size: 0.8rem;\\n}\\n\\nion-infinite-scroll-content[_ngcontent-%COMP%] {\\n  color: var(--ion-color-secondary);\\n}\\n\\n.like-dislike-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n.like-dislike-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  margin-left: 10px;\\n  color: var(--ion-color-secondary);\\n  cursor: pointer;\\n}\\n\\n.like-dislike-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  margin-left: 10px;\\n  cursor: pointer;\\n  color: var(--ion-color-medium);\\n}\\n\\n.like-dislike-buttons[_ngcontent-%COMP%]   ion-icon[color=success][_ngcontent-%COMP%] {\\n  color: var(--ion-color-success);\\n}\\n\\n.like-dislike-buttons[_ngcontent-%COMP%]   ion-icon[color=danger][_ngcontent-%COMP%] {\\n  color: var(--ion-color-danger);\\n}\\n\\n@media (min-width: 576px) {\\n  ion-card[_ngcontent-%COMP%] {\\n    margin: 10px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uLy4uLy4uL1JlcG9zaXRvcmlvcyUyME9maWNpYWwvQXBsaWNhY2lvbi1Nb3ZpbC9BUFAtTW92L2Rpc2NvdmVyaWZ5L3NyYy9hcHAvcGFnZXMvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlDQUFBO0FDQ0Y7O0FERUE7RUFDRSxjQUFBO0VBQ0EseUJBQUE7RUFDQSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7QUNDRjs7QURFQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQ0NGOztBREVBO0VBQ0UsYUFBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsNEJBQUE7QUNDRjs7QURFQTtFQUNFLG9CQUFBO0FDQ0Y7QURDRTtFQUNFLGNBQUE7RUFDQSxhQUFBO0VBQ0EsaUJBQUE7QUNDSjs7QURHQTtFQUNFLHFCQUFBO0VBQ0EsY0FBQTtBQ0FGO0FERUU7RUFDRSwyQ0FBQTtFQUNBLGlDQUFBO0FDQUo7QURHRTtFQUNFLGdCQUFBO0VBQ0EsbUJBQUE7QUNESjtBRElFO0VBQ0UsNkJBQUE7RUFDQSxVQUFBO0FDRko7QURLRTtFQUNFLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLDRCQUFBO0VBQ0EsMENBQUE7QUNISjtBRE1FO0VBQ0UseUJBQUE7RUFDQSw4QkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtBQ0pKO0FETUk7RUFDRSx1Q0FBQTtBQ0pOO0FEUUU7RUFDRSxpQ0FBQTtFQUNBLGtCQUFBO0FDTko7O0FEVUE7RUFDRSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxXQUFBO0VBQ0EscUJBQUE7RUFDQSw4QkFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQkFBQTtBQ1BGOztBRFVBO0VBQ0UsaUNBQUE7QUNQRjs7QURVQTtFQUNFLGFBQUE7RUFDQSx5QkFBQTtBQ1BGO0FEU0U7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsaUNBQUE7RUFDQSxlQUFBO0FDUEo7O0FEWUE7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLDhCQUFBO0FDVEY7O0FEWUE7RUFDRSwrQkFBQTtBQ1RGOztBRFlBO0VBQ0UsOEJBQUE7QUNURjs7QURhQTtFQUNFO0lBQ0UsWUFBQTtFQ1ZGO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWJhY2tncm91bmQtY29sb3IpO1xufVxuXG5pb24tY2FyZCB7XG4gIG1hcmdpbjogMTBweCAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWYxZjFmO1xuICBib3JkZXItcmFkaXVzOiAwO1xuICBib3gtc2hhZG93OiBub25lO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4uYWxidW0tY292ZXIge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBhdXRvO1xuICBkaXNwbGF5OiBibG9jaztcbn1cblxuaW9uLWNhcmQtaGVhZGVyIHtcbiAgcGFkZGluZzogMTBweDtcbn1cblxuaW9uLWNhcmQtdGl0bGUge1xuICBmb250LXNpemU6IDFyZW07XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XG59XG5cbmlvbi1jYXJkLWNvbnRlbnQge1xuICBwYWRkaW5nOiAwIDEwcHggMTBweDtcblxuICBwIHtcbiAgICBjb2xvcjogI2IwYjBiMDtcbiAgICBtYXJnaW46IDVweCAwO1xuICAgIGZvbnQtc2l6ZTogMC44cmVtO1xuICB9XG59XG5cbmlvbi1tZW51IHtcbiAgLS1iYWNrZ3JvdW5kOiAjMWYxZjFmO1xuICAtLXdpZHRoOiAyNTBweDtcblxuICBpb24tdG9vbGJhciB7XG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tdG9vbGJhci1iYWNrZ3JvdW5kKTtcbiAgICAtLWNvbG9yOiB2YXIoLS1pb24tdG9vbGJhci1jb2xvcik7XG4gIH1cblxuICBpb24tY29udGVudCB7XG4gICAgLS1wYWRkaW5nLXRvcDogMDtcbiAgICAtLXBhZGRpbmctYm90dG9tOiAwO1xuICB9XG5cbiAgaW9uLWxpc3Qge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICBpb24tbGlzdC1oZWFkZXIge1xuICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgcGFkZGluZzogMjBweCAxNXB4O1xuICAgIGNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICB9XG5cbiAgaW9uLWl0ZW0ge1xuICAgIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgLS1jb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xuICAgIC0tcGFkZGluZy1zdGFydDogMTVweDtcbiAgICAtLXBhZGRpbmctZW5kOiAxNXB4O1xuICAgIC0tbWluLWhlaWdodDogNDVweDtcblxuICAgICY6aG92ZXIge1xuICAgICAgLS1iYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpO1xuICAgIH1cbiAgfVxuXG4gIGlvbi1pY29uIHtcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICB9XG59XG5cbi51c2VybmFtZS1pdGVtIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIHdpZHRoOiAxMDAlO1xuICAtLWJhY2tncm91bmQ6ICMxYTFhMWE7XG4gIC0tY29sb3I6IHZhcigtLWlvbi10ZXh0LWNvbG9yKTtcbiAgLS1wYWRkaW5nLXRvcDogMTBweDtcbiAgLS1wYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgZm9udC1zaXplOiAwLjhyZW07XG59XG5cbmlvbi1pbmZpbml0ZS1zY3JvbGwtY29udGVudCB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5KTtcbn1cblxuLmxpa2UtZGlzbGlrZS1idXR0b25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcblxuICBpb24taWNvbiB7XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuXG59XG5cbi5saWtlLWRpc2xpa2UtYnV0dG9ucyBpb24taWNvbiB7XG4gIGZvbnQtc2l6ZTogMS41cmVtO1xuICBtYXJnaW4tbGVmdDogMTBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7IC8vIENvbG9yIG5ldXRybyBwb3IgZGVmZWN0b1xufVxuXG4ubGlrZS1kaXNsaWtlLWJ1dHRvbnMgaW9uLWljb25bY29sb3I9XCJzdWNjZXNzXCJdIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zdWNjZXNzKTsgLy8gVmVyZGUgY3VhbmRvIGVzIFwibGlrZWRcIlxufVxuXG4ubGlrZS1kaXNsaWtlLWJ1dHRvbnMgaW9uLWljb25bY29sb3I9XCJkYW5nZXJcIl0ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcik7IC8vIFJvam8gY3VhbmRvIGVzIFwiZGlzbGlrZWRcIlxufVxuXG5cbkBtZWRpYSAobWluLXdpZHRoOiA1NzZweCkge1xuICBpb24tY2FyZCB7XG4gICAgbWFyZ2luOiAxMHB4O1xuICB9XG59IiwiaW9uLWNvbnRlbnQge1xuICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yKTtcbn1cblxuaW9uLWNhcmQge1xuICBtYXJnaW46IDEwcHggMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFmMWYxZjtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgYm94LXNoYWRvdzogbm9uZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLmFsYnVtLWNvdmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogYXV0bztcbiAgZGlzcGxheTogYmxvY2s7XG59XG5cbmlvbi1jYXJkLWhlYWRlciB7XG4gIHBhZGRpbmc6IDEwcHg7XG59XG5cbmlvbi1jYXJkLXRpdGxlIHtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBmb250LXdlaWdodDogNjAwO1xuICBjb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xufVxuXG5pb24tY2FyZC1jb250ZW50IHtcbiAgcGFkZGluZzogMCAxMHB4IDEwcHg7XG59XG5pb24tY2FyZC1jb250ZW50IHAge1xuICBjb2xvcjogI2IwYjBiMDtcbiAgbWFyZ2luOiA1cHggMDtcbiAgZm9udC1zaXplOiAwLjhyZW07XG59XG5cbmlvbi1tZW51IHtcbiAgLS1iYWNrZ3JvdW5kOiAjMWYxZjFmO1xuICAtLXdpZHRoOiAyNTBweDtcbn1cbmlvbi1tZW51IGlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tdG9vbGJhci1iYWNrZ3JvdW5kKTtcbiAgLS1jb2xvcjogdmFyKC0taW9uLXRvb2xiYXItY29sb3IpO1xufVxuaW9uLW1lbnUgaW9uLWNvbnRlbnQge1xuICAtLXBhZGRpbmctdG9wOiAwO1xuICAtLXBhZGRpbmctYm90dG9tOiAwO1xufVxuaW9uLW1lbnUgaW9uLWxpc3Qge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgcGFkZGluZzogMDtcbn1cbmlvbi1tZW51IGlvbi1saXN0LWhlYWRlciB7XG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xuICBmb250LXdlaWdodDogNzAwO1xuICBwYWRkaW5nOiAyMHB4IDE1cHg7XG4gIGNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbn1cbmlvbi1tZW51IGlvbi1pdGVtIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgLS1jb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xuICAtLXBhZGRpbmctc3RhcnQ6IDE1cHg7XG4gIC0tcGFkZGluZy1lbmQ6IDE1cHg7XG4gIC0tbWluLWhlaWdodDogNDVweDtcbn1cbmlvbi1tZW51IGlvbi1pdGVtOmhvdmVyIHtcbiAgLS1iYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpO1xufVxuaW9uLW1lbnUgaW9uLWljb24ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XG4gIG1hcmdpbi1yaWdodDogMTVweDtcbn1cblxuLnVzZXJuYW1lLWl0ZW0ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIC0tYmFja2dyb3VuZDogIzFhMWExYTtcbiAgLS1jb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xuICAtLXBhZGRpbmctdG9wOiAxMHB4O1xuICAtLXBhZGRpbmctYm90dG9tOiAxMHB4O1xuICBmb250LXNpemU6IDAuOHJlbTtcbn1cblxuaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50IHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xufVxuXG4ubGlrZS1kaXNsaWtlLWJ1dHRvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xufVxuLmxpa2UtZGlzbGlrZS1idXR0b25zIGlvbi1pY29uIHtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmxpa2UtZGlzbGlrZS1idXR0b25zIGlvbi1pY29uIHtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcbn1cblxuLmxpa2UtZGlzbGlrZS1idXR0b25zIGlvbi1pY29uW2NvbG9yPXN1Y2Nlc3NdIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zdWNjZXNzKTtcbn1cblxuLmxpa2UtZGlzbGlrZS1idXR0b25zIGlvbi1pY29uW2NvbG9yPWRhbmdlcl0ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcik7XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA1NzZweCkge1xuICBpb24tY2FyZCB7XG4gICAgbWFyZ2luOiAxMHB4O1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","HomePage_ion_item_19_Template_ion_item_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","logout","ɵɵadvance","ɵɵtextInterpolate1","nombreUsuario","likesCount","HomePage_ion_col_31_Template_ion_icon_click_7_listener","album_r4","_r3","$implicit","likeAlbum","id","HomePage_ion_col_31_Template_ion_icon_click_8_listener","dislikeAlbum","ɵɵproperty","cover","ɵɵsanitizeUrl","title","artist","ɵɵtextInterpolate2","liked","disliked","releaseDate","HomePage","constructor","dbService","spotifyAlbumService","authService","router","albums","loading","error","limit","offset","isAuthenticated","ngOnInit","_this","_asyncToGenerator","getNombreUsuario","loadAlbums","navigate","getLikesCount","subscribe","count","searchAlbums","checkAlbumLikes","console","_this2","userId","likedAlbums","getLikedAlbums","forEach","album","includes","loadMore","event","target","complete","length","disabled","albumId","_this3","find","a","updateRecommendations","_this4","log","ɵɵdirectiveInject","i1","DbService","i2","SpotifyAlbumService","i3","AuthService","i4","Router","selectors","decls","vars","consts","template","HomePage_Template","rf","ctx","ɵɵtemplate","HomePage_ion_item_17_Template","HomePage_ion_item_18_Template","HomePage_ion_item_19_Template","HomePage_ion_item_20_Template","HomePage_ion_col_31_Template","HomePage_Template_ion_infinite_scroll_ionInfinite_32_listener","$event"],"sources":["D:\\Repositorios Oficial\\Aplicacion-Movil\\APP-Mov\\discoverify\\src\\app\\pages\\home\\home.page.ts","D:\\Repositorios Oficial\\Aplicacion-Movil\\APP-Mov\\discoverify\\src\\app\\pages\\home\\home.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { SpotifyAlbumService } from '../../services/spotify-album.service';\nimport { Album } from '../../services/spotify-album.service';\nimport { AuthService } from 'src/app/services/auth.service'; // Importar AuthService\nimport { Router } from '@angular/router'; // Importar Router\nimport { DbService } from 'src/app/services/dbservice.service'; // Importar DbService para interactuar con la base de datos de likes\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\n\nexport class HomePage implements OnInit {\n  albums: Album[] = [];\n  loading = false;\n  error = '';\n  limit = 10;\n  offset = 0;\n  isAuthenticated: boolean = false;\n  nombreUsuario: string | null = ''; // Definir nombreUsuario como string o null para evitar errores, se usa \"/\" para indicar que puede ser null o string.\n  likesCount: number = 0; // Variable para contar los likes (Definida con 0.)\n\n  constructor(\n    private dbService: DbService, // Inyectar DbService para manejar localStorage.\n    private spotifyAlbumService: SpotifyAlbumService,\n    private authService: AuthService, // Inyectar AuthService\n    private router: Router // Inyectar Router\n  ) { }\n\n  async ngOnInit() {\n    this.isAuthenticated = this.authService.isAuthenticated();\n    this.nombreUsuario = await this.authService.getNombreUsuario(); // Esperar el nombre de usuario\n\n    if (this.isAuthenticated) {\n      this.loadAlbums();\n    } else {\n      this.router.navigate(['/login']); // Redirigir a la página de login si no está autenticado\n    }\n\n    // Hacer subscribe al contador de likes\n    this.dbService.getLikesCount().subscribe((count) => {\n      this.likesCount = count; // Actualizar el contador de likes en el navbar\n    });\n  }\n\n  loadAlbums() {\n    this.loading = true;\n    this.spotifyAlbumService\n      .searchAlbums('New Order, Oasis, The Cure, Bauhaus, Depeche Mode', this.limit, this.offset)\n      .subscribe(\n        (albums) => {\n          this.albums = albums;\n          this.loading = false;\n          this.checkAlbumLikes(); // Verificar si los álbumes ya tienen \"like\" o \"dislike\"\n        },\n        (error) => {\n          console.error('Error de fetching, error desc.:', error);\n          this.error = 'No se puede cargar albumes, zzz...';\n          this.loading = false;\n        }\n      );\n  }\n\n  async checkAlbumLikes() {\n    const userId = await this.authService.getNombreUsuario(); // Esperar el userId\n    if (userId) { // Verificar que userId no sea null\n      const likedAlbums = await this.dbService.getLikedAlbums(userId); // Esperar a que se resuelva la promesa\n\n      this.albums.forEach(album => {\n        album.liked = likedAlbums.includes(album.id); // Verificar si el álbum tiene \"like\"\n      });\n    }\n  }\n\n  loadMore(event: any) {\n    this.offset += this.limit;\n\n    this.spotifyAlbumService\n      .searchAlbums('Joy Division, New Order, The Police', this.limit, this.offset)\n      .subscribe(\n        (albums) => {\n          this.albums = [...this.albums, ...albums];\n          event.target.complete();\n\n          if (albums.length === 0) {\n            event.target.disabled = true;\n          }\n        },\n        (error) => {\n          console.error('ERROR AL FETCHING DE ALBUMES XD:', error);\n          event.target.complete();\n        }\n      );\n  }\n\n  async likeAlbum(albumId: string) {\n    const userId = await this.authService.getNombreUsuario(); // Esperar el userId\n    if (userId) { // Verificar que userId no sea null\n      const album = this.albums.find(a => a.id === albumId);\n      if (album) {\n        album.liked = true;\n        album.disliked = false;\n        await this.dbService.likeAlbum(userId, albumId); // Guardar en SQLite\n        this.updateRecommendations(album);\n      }\n    }\n  }\n\n  async dislikeAlbum(albumId: string) {\n    const userId = await this.authService.getNombreUsuario(); // Esperar el userId\n    if (userId) { // Verificar que userId no sea null\n      const album = this.albums.find(a => a.id === albumId);\n      if (album) {\n        album.liked = false;\n        album.disliked = true;\n        await this.dbService.dislikeAlbum(userId, albumId); // Guardar en SQLite\n        this.updateRecommendations(album);\n      }\n    }\n  }\n\n  logout() {\n    this.authService.logout();\n    this.router.navigate(['/login']);\n  }\n\n  // Simular la actualización de recomendaciones\n  updateRecommendations(album: Album) {\n    if (album.liked) {\n      console.log(`Recomendaciones actualizadas basadas en que te gusta el álbum: ${album.title}`);\n    } else if (album.disliked) {\n      console.log(`No se mostrarán álbumes similares a: ${album.title}`);\n    }\n  }\n}\n","<ion-app>\n  <ion-split-pane contentId=\"main-content\">\n    <!-- Menú lateral -->\n    <ion-menu contentId=\"main-content\" type=\"overlay\">\n      <ion-header>\n      </ion-header>\n      <ion-content>\n        <ion-list>\n          <ion-list-header>Discoverify</ion-list-header>\n          <ion-menu-toggle auto-hide=\"false\">\n            <ion-item routerLink=\"/home\" routerDirection=\"root\">\n              <ion-icon slot=\"start\" name=\"home-outline\"></ion-icon>\n              <ion-label>Inicio</ion-label>\n            </ion-item>\n            <ion-item routerLink=\"/contribute\" routerDirection=\"root\">\n              <ion-icon slot=\"start\" name=\"cloud-upload-outline\"></ion-icon>\n              <ion-label>Realizar aporte</ion-label>\n            </ion-item>\n            <ion-item *ngIf=\"!isAuthenticated\" routerLink=\"/login\" routerDirection=\"root\">\n              <ion-icon slot=\"start\" name=\"log-in-outline\"></ion-icon>\n              <ion-label>Iniciar sesión</ion-label>\n            </ion-item>\n            <ion-item *ngIf=\"!isAuthenticated\" routerLink=\"/register\" routerDirection=\"root\">\n              <ion-icon slot=\"start\" name=\"person-add-outline\"></ion-icon>\n              <ion-label>Registrarse</ion-label>\n            </ion-item>\n            <ion-item *ngIf=\"isAuthenticated\" (click)=\"logout()\">\n              <ion-icon slot=\"start\" name=\"log-out-outline\"></ion-icon>\n              <ion-label>Cerrar sesión</ion-label>\n            </ion-item>\n          </ion-menu-toggle>\n        </ion-list>\n        <!-- Nombre de usuario en el borde inferior del menú -->\n        <ion-item *ngIf=\"isAuthenticated\" class=\"username-item\" lines=\"none\">\n          <ion-label>\n            Cuenta: {{ nombreUsuario }} <br>\n            <small>Álbumes que te gustan: {{ likesCount }}</small> <!-- Mostrar el contador de likes -->\n          </ion-label>\n        </ion-item>\n      </ion-content>\n    </ion-menu>\n\n    <!-- Contenido principal (álbumes) -->\n    <div class=\"ion-page\" id=\"main-content\">\n      <ion-header>\n        <ion-toolbar>\n          <ion-buttons slot=\"start\">\n            <ion-menu-button></ion-menu-button>\n          </ion-buttons>\n          <ion-title>Discoverify</ion-title>\n        </ion-toolbar>\n      </ion-header>\n\n      <ion-content>\n        <ion-grid>\n          <ion-row>\n            <ion-col size=\"12\" size-sm=\"6\" size-md=\"3\" *ngFor=\"let album of albums\">\n              <ion-card>\n                <img [src]=\"album.cover\" [alt]=\"album.title + ' - ' + album.artist\" class=\"album-cover\" />\n                <ion-card-header>\n                  <ion-card-title>{{ album.artist }} - {{ album.title }}</ion-card-title>\n                  <div class=\"like-dislike-buttons\">\n                    <ion-icon name=\"thumbs-up-outline\" [color]=\"album.liked ? 'success' : 'medium'\"\n                      (click)=\"likeAlbum(album.id)\">\n                    </ion-icon>\n                    <ion-icon name=\"thumbs-down-outline\" [color]=\"album.disliked ? 'danger' : 'medium'\"\n                      (click)=\"dislikeAlbum(album.id)\">\n                    </ion-icon>\n                  </div>\n                </ion-card-header>\n                <ion-card-content>\n                  <p>Fecha de lanzamiento: {{ album.releaseDate }}</p>\n                </ion-card-content>\n              </ion-card>\n\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n\n        <!-- Infinite scroll  -->\n        <ion-infinite-scroll (ionInfinite)=\"loadMore($event)\">\n          <ion-infinite-scroll-content loadingSpinner=\"bubbles\" loadingText=\"Cargando más álbumes...\">\n          </ion-infinite-scroll-content>\n        </ion-infinite-scroll>\n      </ion-content>\n    </div>\n  </ion-split-pane>\n</ion-app>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}